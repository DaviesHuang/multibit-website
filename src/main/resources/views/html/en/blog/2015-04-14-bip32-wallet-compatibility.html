<h3>BIP 32 Wallet compatibility</h3>

<p>Thanks to the sterling work of github user 'gurnec' during Beta testing an incompatibility between MultiBit HD and
  other hierarchical deterministic (HD) wallets was discovered indicating that they are not BIP 32 compliant. This is
  important because 'BIP 32 compliance' means that a user of one wallet can easily migrate to another in a safe manner
  simply by providing their "wallet words" during a restore process.</p>

<p>The current MultiBit HD wallets are perfectly good HD wallets but unfortunately we made a mistake in the address
  generation code so that typing in the same "wallet words" in another wallet will not yield the same addresses and the
  balance will be incorrect.</p>

<p>This incompatibility is fixed in release 0.0.8beta.</p>

<p>Trezor wallets are not affected since they use the BIP 44 standard.</p>

<p>The vast majority of MultiBit HD users will never see a wallet generated by version 0.0.7beta or earlier (known as
  "Beta7 wallets"). You can see whether you are affected by going into 'Manage wallet | Wallet dashboard' and looking at the section
  titled 'Wallet capabilities'. If it says 'Beta 7 MultiBit HD wallet' on the first row then you have unlocked a Beta7 wallet and you should migrate. Simply follow the instructions given below.</p>

<h4>How to restore a Beta7 wallet</h4>

<p>To restore a Beta7 wallet from your wallet words you need to perform the following steps:</p>
<ol>
  <li>Unlock any wallet (you may need to create a new one first if this is a disaster recovery scenario)</li>
  <li>Go into "Tools | Labs" and enable the option "Enable restore of Beta7 wallets".</li>
  <li>From the password entry screen, press the 'Restore' button and then select the 'Restore wallet' option. Click Next.</li>
  <li>On the first screen where you enter your wallet words, make sure the reply to "What created these wallet words ?" is
    "MultiBit HD (Beta7 - Not BIP 32 compliant)".</li>
  <li>Continue through the 'Restore wallet' wizard as normal.</li>
</ol>

<p>By enabling and selecting this normally hidden option you tell MultiBit HD to use the Beta7 wallet format in order
  to recover your bitcoins.</p>

<p>While you have your wallet words to hand, you should add a note to them indicating that they are for Beta7.</p>

<h4>How to migrate away from a Beta7 wallet</h4>

<p>When using MultiBit HD 0.0.8beta (or later) any new wallet and a regular restore from your "wallet words" will produce
  a BIP 32 compliant wallet. This means you will be generating the same addresses as other BIP 32 wallets such as Lighthouse.</p>

<p>First, create a new BIP 32 wallet:</p>
<ol>
  <li>Create a new BIP 32 wallet by clicking the "Restore" button on the unlock screen</li>
  <li>From the list of options choose "Create new wallet" and follow the instructions to completion</li>
  <li>Unlock the new wallet</li>
  <li>Use "Send/Request | Request" to create an address and then copy it to the clipboard (note the start and end characters)</li>
  <li>Use "Exit/Switch | Switch wallet" to return to the unlock screen</li>
</ol>
<p>Next, you need to empty your old Beta7 wallet into the new one:</p>
<ol>
  <li>Unlock the old Beta7 wallet</li>
  <li>Use "Manage Wallet | Empty wallet" to start the emptying process</li>
  <li>Paste the new wallet receiving address (verify the start and end characters in case of errors in transcription)</li>
  <li>Follow the instructions to completion</li>
</ol>
<p>Finally, verify that your funds have arrived safely in the new wallet by unlocking it and waiting for sync to complete.</p>

<p>While you have your Beta7 wallet words to hand, you should add a note to them indicating that they are for Beta7.</p>

<p><strong>Do not dispose of your Beta7 wallet words!</strong> You must keep them safe in case someone ever sends bitcoin
  to one of the addresses sometime in the future.</p>

<h4>Technical details</h4>
<p>This is the GitHub issue describing the technical details : <a href="https://github.com/bitcoin-solutions/multibit-hd/issues/445">#445</a></p>

<p>The problem was in the conversion of a BIP 39 mnemonic to its corresponding xpriv. Instead of treating the mnemonic bytes as
  a seed they were treated as entropy. </p>

<p>14 April 2015</p>

<h4>Related articles</h4>
<p>Here are some related articles:</p>
<ul>
  <li><a href="/blog/2015/04/14/multibit-hd-beta-8.html" target="_blank">MultiBit HD Beta 8 release</a></li>
  <li><a href="/blog/2015/04/14/payment-protocol-support-bip70.html" target="_blank">Payment protocol support (BIP 70)</a></li>
</ul>
